<!-- src/app/app.component.html -->

<div class="app-container">

  <!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <div class="logo-section">
        <span class="logo-icon">‚ò†Ô∏è</span>
        <div class="logo-text">
          <h1>URL Phishing Detector</h1>
          <span class="tagline"> Lets see how advanced threat detection can happen </span>
        </div>
      </div>

      <div class="header-status">
        <span class="status-indicator" [ngClass]="serverStatus">
          <span class="status-dot"></span>
          <span class="status-text">
            {{ serverStatus === 'online' ? 'API Online' :
            serverStatus === 'offline' ? 'API Offline' : 'Checking...' }}
          </span>
        </span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="app-main">

    <!-- URL Input -->
    <section class="input-section">
      <app-url-input [isLoading]="isLoading" (analyze)="onAnalyze($event)"></app-url-input>
    </section>

    <!-- Analysis Result -->
    <section class="result-section" *ngIf="result || isLoading">

      <!-- Loading State -->
      <div class="loading-overlay" *ngIf="isLoading">
        <div class="loading-content">
          <div class="loading-spinner"></div>
          <span class="loading-text">Analyzing URL...</span>
          <span class="loading-subtext">Running security checks</span>
        </div>
      </div>

      <!-- Result Display -->
      <app-analysis-result *ngIf="result && !isLoading" [result]="result" (dismiss)="onDismissResult()"
        (reanalyze)="onReanalyze($event)"></app-analysis-result>
    </section>

    <!-- History Section -->
    <section class="history-section" *ngIf="history.length > 0">
      <div class="history-header">
        <h2>
          <span class="history-icon">üìú</span>
          Recent Scans
        </h2>
        <button class="clear-history-btn" (click)="clearHistory()">
          Clear All
        </button>
      </div>

      <div class="history-list">
        <div *ngFor="let item of history; let i = index; trackBy: trackByUrl" class="history-item"
          [ngClass]="item.risk_level.toLowerCase()" (click)="selectFromHistory(item)">
          <span class="history-risk-icon">{{ getRiskIcon(item.risk_level) }}</span>

          <div class="history-info">
            <span class="history-hostname">{{ item.hostname }}</span>
            <span class="history-url">{{ item.url }}</span>
          </div>

          <div class="history-meta">
            <span class="history-score">{{ item.risk_score }}</span>
            <button class="history-remove" (click)="removeFromHistory(i, $event)" title="Remove">
              ‚úï
            </button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="footer-content">
      <p class="footer-text">
        Built with ‚ù£Ô∏è by th3Agent | Claude code helped a lot!!
      </p>
    </div>
  </footer>

</div>